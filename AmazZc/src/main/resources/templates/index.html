<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		
		<link rel="stylesheet" href="../static/bootstrap/css/bootstrap.css" />
		<link rel="stylesheet" href="../static/bootstrapValidator/css/bootstrapValidator.min.css" />
		<link rel="stylesheet" href="../static/bootstrap/css/bootstrap-theme.min.css" />
		<link rel="stylesheet" href="../static/Tangents/style.css" />
		<link rel="stylesheet" href="../static/jquery-circle-menu/style.css"/>
		<script type="text/javascript" src="../static/jquery/jquery-3.3.1.min.js" ></script>
		<script type="text/javascript" src="../static/bootstrap/js/bootstrap.min.js" ></script>
		<script type="text/javascript" src="../static/bootstrapValidator/js/bootstrapValidator.min.js" ></script>
		<script type="text/javascript" src="../static/jquery-circle-menu/index.js"></script>		
		<script type="text/javascript" src="../static/CanvasParticles/canvas-particle.js"></script>
		<title>后台管理系统</title>
		<style>
			body{background-color: white}
		</style>
	</head>
	
	<body id="mydiv">
		<script src='../static/Tangents/toxiclibs.min.js'></script>
		<script src='../static/Tangents/animitter.min.js'></script>
	  	<script src=''></script>
	  	<script type="text/javascript" src="../static/jquery-circle-menu/index.js"></script>
	  	<script src="../static/Tangents/index.js"></script>
		<div class="container">
			
			
			<div class="modal show center-block" id="loginModal">
				<div class='selector'>
			  <ul>
			    <li>
			      <input id='1' type='checkbox'>
			      <label for='1'>贝塞尔</label>
			    </li>
			    <li>
			      <input id='2' type='checkbox'>
			      <label for='2'>粒子</label>
			    </li>
			    <li>
			      <input id='3' type='checkbox'>
			      <label for='3'>Option 3</label>
			    </li>
			    <li>
			      <input id='4' type='checkbox'>
			      <label for='4'>Option 4</label>
			    </li>
			    <li>
			      <input id='5' type='checkbox'>
			      <label for='5'>Option 5</label>
			    </li>
			    <li>
			      <input id='6' type='checkbox'>
			      <label for='6'>Option 6</label>
			    </li>
			    <li>
			      <input id='7' type='checkbox'>
			      <label for='7'>Option 7</label>
			    </li>
			    <li>
			      <input id='8' type='checkbox'>
			      <label for='8'>Option 8</label>
			    </li>
			  </ul>
			  <button>主题</button>
			</div>
			
				
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h1>后台管理系统</h1>
						</div>
						
						<div class="modal-body">
							
							<form class="" id="loginForm" role="form" method="post" novalidate="novalidate">
				<div>
					<p class="f-18 text-center">用户登录</p>
				</div>
				
				<div class="form-group mt20">
					<div class="input-group">
						<div class="input-group-addon">
							<i class="glyphicon glyphicon-user"></i>
						</div>
						<input type="text" id="username" name="username" class="form-control" placeholder="请输入用户名" value="" autocomplete="off" data-bv-field="username">
					</div>
					<span id="userErrorMessage" class="help-block lastNameMessage f-red"></span>
				</div>
				
				<div class="form-group mt20">
					<div class="input-group">
						<div class="input-group-addon">
							<i class="glyphicon glyphicon-lock"></i>
						</div>
						<input type="password" id="password" name="password" class="form-control" placeholder="请输入密码" value="" autocomplete="off" onfocus="$(this).attr('type','password');" data-bv-field="password">
					</div>
					<span id="passErrorMessage" class="help-block lastNameMessage f-red"></span>
				</div>
				
				<div class="form-group mt20">
					<div class="input-group">
						<input type="text" maxlength="4" class="form-control" id="CHECK_CODE" name="CHECK_CODE" placeholder="请输入验证码" data-bv-field="CHECK_CODE">
						<div class="input-group-addon">
							<img height="20" width="90" id="kaptchaImage" src="ClinicCountManager/captcha-image.action">
						</div>
					</div>
					<span id="errorMessage" class="help-block lastNameMessage f-red"></span>
				</div>
				
				<div class="form-group mt10">
					<div class="checkbox">
						<label>
						 	<input type="checkbox" id="remeberMe" name="remeberMe"> 记住密码
						 </label> 
						<a class="pull-right inline" id="serchPassword" href="#">忘记登录密码?</a>
					</div>
				</div>
				
				<div class="form-group center-block">
					<button type="submit" id="loginBtn" class="mt20 btn btn-info" data-loading-text="正在登录...">立即登录</button>
					<button id="registBtn" class="mt20 btn btn-primary">立即注册</button>
				</div>
				
				<input type="hidden" value=""></form>
				
					</div>
					</div>
				</div>
			</div>
		</div>
		
		<script>
		
		
		function setTheme(type){
			console.log(type);
			$("#mydiv").find('canvas').remove();
			if("贝塞尔" == type){
				$("#mydiv").css("background-color","white")
				/*main = function(){*/
				    document.body.appendChild(sketch.el);
				    document.body.appendChild(aboutPanel.el);
				
				/*    document.body.querySelector('.btn.randomize').addEventListener('click', app.randomize);*/
				    /*window.addEventListener('resize', app.reset);*/
				
				    //transition in info panel
				     
				    setTimeout(function(){
				       aboutPanel.loop.start();
				    }, 6000);
				    
				    setTimeout(function(){
				       sketch.loop.stop();
				    }, 30000)
				    
				           
				    app.reset();
				/*};
				window.onload = main;*/
			}else if(type=="粒子"){
				
				$("#mydiv").css("background-color","#2D2D2D");
				/*main1 = function() {*/
		    		//配置
				    var config = {
				        vx: 4,	//小球x轴速度,正为右，负为左
				        vy: 4,	//小球y轴速度
				        height: 1,	//小球高宽，其实为正方形，所以不宜太大
				        width: 1,
				        count: 200,		//点个数
				        color: "121, 162, 185", 	//点颜色
				        stroke: "0,255,255", 		//线条颜色
				        dist: 000, 	//点吸附距离
				        e_dist: 20000, 	//鼠标吸附加速距离
				        max_conn: 10 	//点到点最大连接数
				    }
				    //调用
				    	CanvasParticle(config);
				    
				/*}*/
				
				//window.onload = main1;
			}
		}
		
        $(function(){           
            $('#kaptchaImage').click(function () {
             	$(this).hide().attr('src', 'ClinicCountManager/captcha-image.action?' + Math.floor(Math.random()*100) ).fadeIn(); 
            });
            /*if($.cookie("rmbUser") == "true") {
                $("#remeberMe").prop("checked", true);
                $("#username").val($.cookie("userNameCookie"));
                $("#password").val($.cookie("passwordCookie"));
            }else{
            	$("#remeberMe").prop("checked", false);
                $("#username").val("");
                $("#password").val("");
            }*/
            
            var w=1920,h=700,W=$('.carousel').width();
	        $('.carousel-inner img').width(W);
	        $('.carousel-inner img').height(h*W/w);
        });   
        
    	$("#regwindows").on("click", function(){
    		window.document.location.href="reg.html";
    	});
    	$("#serchPassword").on("click", function(){
    		window.document.location.href="serchPassword.html";
    	});
        $(document).ready(function() {
        	$('#loginForm').bootstrapValidator({
                message: 'This value is not valid',
                live:"submitted",
                 feedbackIcons: {
                    valid: 'glyphicon glyphicon-ok',
                    invalid: 'glyphicon glyphicon-remove',
                    validating: 'glyphicon glyphicon-refresh'
                },
                fields: {
                	username: {
                		 container: '#userErrorMessage',
                         validators: {
                             notEmpty: {
                                 message: '请输入用户名'
                             }
                         }
                    },
                    password: {
                    	container: '#passErrorMessage',
                        validators: {
                        	notEmpty: {
                                message: '请输入密码'
                            }
                        }
                    },
                    CHECK_CODE:{
                    	container: '#errorMessage',
                    	validators: {
                        	notEmpty: {
                                message: '请输入验证码'
                            }
                        }
                    }
                },
                submitHandler: function(validator, form, submitButton) {
                	$("#loginBtn").button('loading');
            		Qdone.jsonDataRequest({
    					url:'data/userLogin.action',
    					params:{
    						ACTION_NAME:'USER_LOGIN',
    						username:$("#username").val(),
    						password:$("#password").val(),
    						CHECK_CODE:$("#CHECK_CODE").val()
    					},
    					method:'POST',
    					sCallback:function(json){
    						
    						if(json.RESCODE=="000000"){
    							/*if ($("#remeberMe").prop("checked")) {
    					            var str_username = $("#username").val();
    					            var str_password = $("#password").val();
    					            $.cookie("rmbUser", "true", { expires: 7 }); //存储一个带7天期限的cookie
    					            $.cookie("userNameCookie", str_username, { expires: 7 });
    					            $.cookie("passwordCookie", str_password, { expires: 7 });
    					        }else {
    					            $.cookie("rmbUser", "false", { expire: -1 });
    					            $.cookie("userNameCookie", "", { expires: -1 });
    					            $.cookie("passwordCookie", "", { expires: -1 });
    					        }*/
    							window.document.location.href="home.html";
    						}else{
    							$("#errorMessage").html(json.MESSAGE);
    							$("#kaptchaImage").attr('src', 'ClinicCountManager/captcha-image.action?' + Math.floor(Math.random()*100) )
    							$("#loginBtn").button('reset');
    							$(form).bootstrapValidator('disableSubmitButtons', false);
    						}
    					},
    					eCallback:function(XMLHttpRequest, textStatus, errorThrown){
    						$("#loginBtn").button('reset')
    					}
    				});
                }
            });
        } );
        
        var angleStart = -360;

// jquery rotate animation
function rotate(li,d) {
    $({d:angleStart}).animate({d:d}, {
        step: function(now) {
            $(li)
               .css({ transform: 'rotate('+now+'deg)' })
               .find('label')
                  .css({ transform: 'rotate('+(-now)+'deg)' });
        }, duration: 0
    });
}

// show / hide the options
function toggleOptions(s) {
    $(s).toggleClass('open');
    var li = $(s).find('li');
    var deg = $(s).hasClass('half') ? 180/(li.length-1) : 360/li.length;
    for(var i=0; i<li.length; i++) {
        var d = $(s).hasClass('half') ? (i*deg)-90 : i*deg;
        $(s).hasClass('open') ? rotate(li[i],d) : rotate(li[i],angleStart);
    }
}

$('.selector button').on('click',function(e) {
    toggleOptions($(this).parent());
});

$('.selector label').on('click',function(){
	$(this).parents('.selector').find('label').css('background-color','#5cb85c');
	$(this).css('background-color','#428bca');
	setTheme($(this).text());
})

setTimeout(function() { toggleOptions('.selector');
	var $lable = $(".selector label");
	if($lable.length>0){
		$($lable[0].click());		
	}
}, 100);
		</script>
	</body>
</html>
