<!DOCTYPE html>
<%@page pageEncoding="UTF-8"%>
<% String contextPath = request.getContextPath(); %>
<%@ page import="java.util.Date" %>
<%@page import="java.util.Date"%>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="<%=contextPath %>/css/common.css" />
    <link rel="stylesheet" type="text/css" href="<%=request.getContextPath() %>/css/queryStyleEnd.css" />
    <link rel="stylesheet" type="text/css" href="<%=contextPath %>/css/queryStyle.css" />
    <link rel="stylesheet" type="text/css" href="<%=contextPath %>/css/cloud-admin.css" >
    <%-- <link href="<%=contextPath %>/frontend_theme/font-aweseom4.6.3/css/font-awesome.min.css" rel="stylesheet"> --%>
    <link rel="stylesheet" type="text/css" href="<%=contextPath %>/css/popoverwin.css" />
    <link href="<%=contextPath%>/css/rccommon.css" rel="stylesheet">
    <%-- <link href="<%=contextPath %>/font-awesome/css/font-awesome.min.css" rel="stylesheet"> --%>
    <link href="<%=contextPath %>/frontend_theme/Font-Awesome-master-4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="<%=contextPath %>/handsontable/handsontable-orgin.css" rel="stylesheet">
    <!-- gridly 部分 -->
    <link href="<%=contextPath %>/report/index/css/jquery.gridly.css" rel="stylesheet">
    <!-- 标签样式 -->
    <link href="<%=contextPath %>/report/index/css/color-sticker.css" rel="stylesheet" type="text/css">
    <!-- 主题换色样式 -->
    <link href="<%=contextPath %>/report/index/css/colorStyle.css" rel="stylesheet" type="text/css">
    <link href="<%=contextPath %>/css/perfect-scrollbar.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="<%=contextPath %>/css/jquery-ui-1.12.1.custom/jquery-ui.min.css" />
    <!-- 查询下拉框 -->
    <link rel="stylesheet" type="text/css" href="<%=contextPath %>/tools/jsp/components/selectChoose/selectChoose.css" />
    <link rel="stylesheet" type="text/css" href="<%=contextPath %>/js/bootstrap-select/bootstrap-select.min.css" >
    <link rel="stylesheet" type="text/css" href="<%=contextPath %>/report/index/css/serviceCommon.css?v=<%=new Date().getTime() %>" >
    <link rel="stylesheet" type="text/css" href="<%=contextPath %>/report/index/css/portArea.css" >
    <link rel="stylesheet" type="text/css" href="<%=contextPath %>/report/index/css/phcommon.css?v=<%=new Date().getTime() %>">
    <link rel="stylesheet" type="text/css" href="<%=contextPath %>/js/fullcalendar/fullcalendar.min.css" />

    <%-- <script src="https://cdn.bootcss.com/vue/2.5.16/vue.js"></script> --%>
    <script src="<%=contextPath%>/js/vue.js"></script>
    <!-- <script src="https://cdn.bootcss.com/vue/2.5.16/vue.js"></script> -->
    <script type="text/javascript" src="<%=contextPath %>/echarts/echarts.min.js"></script>
    <script src="<%=contextPath %>/js/jquery/jquery-2.0.3.min.js"></script>
    <script type="text/javascript" src="<%=contextPath %>/js/jquery-ui-1.12.1.custom/jquery-ui.min.js"></script>
    <!-- <script src='https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js'></script> -->
    <script src="<%=contextPath%>/report/index/js/jquery.gridly.js?v=<%=new Date().getTime() %>"></script>
    <script type="text/javascript" src="<%=contextPath %>/handsontable/handsontable-min.js"></script>
    <script type="text/javascript" src="<%=contextPath %>/js/commonjs.js"></script>
    <script src="<%=contextPath %>/json/pluginJson.js"></script>
    <script src="<%=contextPath %>/bootstrap-dist/js/bootstrap.min.js"></script>
    <!-- gridly 部分 -->
    <!-- 标签js -->
    <script src="<%=contextPath%>/report/index/js/jquery.dragsort.js"></script>
    <script src="<%=contextPath%>/report/index/js/colorsticker.js" type="text/javascript"></script>
    <!--  -->
    <script src="<%=request.getContextPath() %>/js/perfect-scrollbar.min.js"></script>
    <!-- 时间插件 -->
    <script type="text/javascript" src="<%=contextPath %>/js/laydate/laydate.js"></script>
    <script type="text/javascript" src="<%=contextPath %>/js/util/myValid.js"></script>
    <!-- 查询下拉框 -->
    <script type="text/javascript" src="<%=contextPath %>/tools/jsp/components/selectChoose/selectChoose.js"></script>
    <!-- 联想下拉框 -->
    <script type="text/javascript" src="<%=request.getContextPath()%>/js/bootstrap-select/bootstrap-select.min.js"></script>
    <!-- d3.js -->
    <script src="<%=request.getContextPath() %>/d3tree/d3.js"></script>
    <!-- 脑图部分的js -->
    <script src="<%=request.getContextPath() %>/report/index/js/BuildConfJson1.js"></script>
    <script src="<%=request.getContextPath() %>/js/messengerjs/messenger.js"></script>
    <script src="<%=request.getContextPath() %>/report/index/js/draggable.js"></script>
    <script src="<%=request.getContextPath() %>/pageoffice.js" id="po_js_main"></script>
    <script src="<%=contextPath %>/ckeditor/ckeditor.js"></script>

    <!-- 添加SQL编辑代码高亮样式 -->
    <link rel="stylesheet" href="<%=contextPath %>/report/index/css/codemirror.css">
    <link rel="stylesheet" href="<%=contextPath %>/report/index/css/dracula.css">
    <link href="<%=contextPath %>/css/animatecss/animate.min.css" rel="stylesheet" type="text/css">
    <!-- SQL代码高亮JS -->
    <script type="application/javascript" src="<%=contextPath %>/report/index/js/codemirror.js"></script>
    <script type="application/javascript" src="<%=contextPath %>/report/index/js/sql.js"></script>
    <!-- 自动刷新SQL编辑框 -->
    <script type="application/javascript" src="<%=contextPath %>/report/index/js/autorefresh.js"></script>
    <!-- json处理包 -->
    <%-- <script src="<%=request.getContextPath() %>/report/index/js/json2.js"></script> --%>

    <script type="text/javascript" src="<%=contextPath %>/js/fullcalendar/fullcalendar.min.js"></script>
    <script type="text/javascript" src="<%=contextPath %>/js/fullcalendar/gcal.js"></script>
    <style>
        .addbox{
            position: absolute;
            background-color: #0072c6;
            z-index: 10;
            left: 1356px;
            top: 521px;
        }

        .editBox{
            position: absolute;
            background-color: #0072c6;
            z-index: 10;
            left: 1356px;
            top: 521px;
        }

        #div1{
            border-style: solid;
            border-width: 10px 5px 5px 5px;
            border-color: #FFE4C4 transparent transparent transparent;
            width: 0px;
            height: 0px;
            display:inline-block;
        }

        #moveAlert{
            position: absolute;
            z-index: -1;
            text-align: center;
            text-align: center;
        }

        #moveAlertContent{
            width: 274px;
            height: 58px;
            border: 1px solid bisque;
            background-color: bisque;
            border-radius: 5px;
        }

        #operateEventModel selected{
            background-color:#eee !important;
        }

        .overflowClass{
            white-space:nowrap;
            text-overflow:ellipsis;
            -o-text-overflow:ellipsis;
            overflow: hidden;
        }
    </style>
</head>
<body color-series="traditional" style="overflow-x: auto;">
<%@include file="/tools/jsp/components/combobox.jsp"%>
<%@include file="/tools/jsp/components/tipBox.jsp" %>

<!-- 重新布局确认框 -->

<input type="hidden" id="operateEventId"></input>
<div id="operateEventModel" style="overflow-y: hidden; z-index: 1041;" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header" style="border-bottom: 1px solid #e5e5e5">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="eventModel">记事本</h4>
            </div>
            <div class="modal-body" style="padding: 0px;">
                <div style="border-bottom: 1px solid #eee;padding: 5px;" id="buttonGroupDiv">
                    <button type="button" class="btn btn-default select" onclick="checkType(this)"  value="process">流程</button>
                    <button type="button" class="btn btn-default" onclick="checkType(this)" value="note">记录</button>
                </div>

                <div style="padding: 5px;display:none">

                    <div>
                        <label>报告名称</label>
                        <input type="text" />
                    </div>

                    <div>
                        <label>基金类型</label>
                        <input type="text" />
                    </div>

                    <div>
                        <label>开始时间</label>
                        <input type="text" />
                    </div>

                    <div>
                        <label>结束时间</label>
                        <input type="text" />
                    </div>


                    <div>
                        <input type="radio" name="startType"/>立即发起
                        <input type="radio" name="startType"/>指定时间
                        <input type="radio" name="startType"/>循环发起
                    </div>

                    <div>
                        <label>发起时间:</label>
                        <input type="text" />
                    </div>
                </div>

                <div style="padding: 5px;">

                    <div>
                        <label>标题:</label>
                        <input type="text" id="noteTitle" name="noteTitle"/>
                        <input type="radio" name="degree" value="red" /> 重要
                        <input type="radio" name="degree" value="yellow" /> 一般
                        <input type="radio" name="degree" value="blue"/> 提醒
                    </div>

                    <div>
                        <label>开始时间:</label>
                        <input class="laydate-icon" type="text" id="noteStartTime" onClick="laydate({format:'YYYY-MM-DD',elem:'#noteStartTime',max:laydate.now(0)})"/>
                        <input type="time"/>
                    </div>

                    <div>
                        <label>结束时间:</label>
                        <input class="laydate-icon" type="text" id="noteEndTime" onClick="laydate({format:'YYYY-MM-DD hh:MM:ss',elem:'#noteEndTime',max:laydate.now(0)})"/>
                        <input type="time"/>
                    </div>

                    <div>
                        <label>内容:</label>
                        <textarea id="noteTextCont"></textarea>
                    </div>

                    <div></div>
                </div>
            </div>
            <div class="modal-footer" style="border-top: 1px solid #e5e5e5; margin: 0;text-align: center;">
                <button type="button" class="btn btn-default" onclick="operateEvent()">确认</button>
                <button type="button" class="btn btn-default close-win" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>

<div id="moveAlert" style="display:none">
    <div id="moveAlertContent" style="text-align:left">
        <!-- <div style="border-bottom: 1px solid #EEE;">时间 :2019-02-18 - 2019-02-18</div>
        <div>标题:测试功能内容</div>
        <div class="overflowClass">内容:</div> -->
    </div>
    <div id="div1"></div>
</div>


<div id="calendar">
    <div style="height:22px;background-color:#eee"></div>
</div>


<script type="text/javascript">

    var events = [{title:"测试事件",start:'2019-02-18T10:30:00',end:'2019-02-18T12:30:00',obj:{'name':'12340','age':'18'},type:'note',noteTextCont:'测试事件啊'}];

    $(function() {

        // page is now ready, initialize the calendar...

        $('#calendar').fullCalendar({
            header:{//prev/next 包含月/周/日
                right: 'prev,next today,listWeek', //右边  前/后/当天
                center: 'prevYear title nextYear',//中间 前年/主题/明年
                left: 'month,agendaWeek,agendaDay'//左边 月/周/年
            },
            footer:false,//默认是不显示参数和头一样
            views:{//格式化
                month:{
                    titleFormat: 'MMMM YYYY'
                }
            },
            monthNames:['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
            monthNamesShort:['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
            dayNames:['日', '一', '二', '三', '四', '五', '六'],
            dayNamesShort:['日', '一', '二', '三', '四', '五', '六'],
            buttonText:{//自定义按钮
                today:'今天',
                month:'月',
                agendaWeek:'周',
                agendaDay:'日'
            },
            allDaySlot:true,//显示全天
            allDayText:'全天',//全天
            unselectAuto: true,//点击拖拽之后点击日历空白区域是否取消选中状态true为取消 false为不取消
            theme:true,
            selectable: true,//显示事件范围的提示
            weekends: true, //影藏显示周末 false:不显示 true:显示  默认是显示周末
            navLinks: true, // can click day/week names to navigate views
            editable: true,//Event是否可以被拖动或者拖拽
            eventLimit: true, // allow "more" link when too many events
            events: function(start,end,callback){//加载日程事件
                callback(events);
            },
            //天数点击触发新增时间
            dayClick:function(date, allDay, jsEvent, view){
                $("#operateEventModel").modal({show: true, backdrop: "static"});
                $("#operateEventId").val('');
            },
            //事件点击触发编辑和删除
            eventClick:function(event, jsEvent, view){

            },
            //鼠标滑过显示详情
            eventMouseover:function(event, jsEvent, view){
                var X = jsEvent.clientX-jsEvent.offsetX-6;
                var Y = jsEvent.clientY-jsEvent.offsetY + $(document).scrollTop()-3-58;
                $("#moveAlert").removeClass("fadeOut").addClass("animated fadeIn");
                $("#moveAlert").css({'display':'','left':X+'px','top':Y+'px','z-index':'9'});
                $("#moveAlertContent").empty();
                var html = "";
                if(event.type=="note"){
                    html +='<div style="border-bottom: 1px solid #EEE;">'+ $.fullCalendar.formatDate(event.start, "yyyy-MM-dd hh:MM:ss") + '-' + $.fullCalendar.formatDate(event.end, "yyyy-MM-dd hh:MM:ss") +'</div>' + '<div>标题:'+ event.title +'</div><div class="overflowClass">内容:'+ event.noteTextCont +'</div>';
                }
                $("#moveAlertContent").append(html);
                console.log(event);
            },
            //鼠标离开显示详情
            eventMouseout:function(event, jsEvent, view){
                $("#moveAlert").css({'z-index':'-1'});
                $("#moveAlert").removeClass("fadeIn").addClass("animated fadeOut");
            }
        })
    });

    function addEvent(){
        $("#countersignRemainingTimeModel [data-dismiss='modal']").click();
    }

    /*------------------------- 样式变化 -----------------------------*/
    //选择记事本类型
    function checkType(obj){
        $(obj).siblings('button').removeClass('select');
        $(obj).addClass('select');
    }

    /*------------------------ 确定按钮 ------------------------------*/
    //确定操作

    function operateEvent(){
        //获取事件id
        var eventId = $("#operateEventId").val();
        //事件类型
        var type = null;
        $("#buttonGroupDiv button").each(function(){
            if($(this).hasClass('select')){
                type = $(this).attr("value");
            }
        })
        console.log(type);
        if(isNotNull(eventId)){
            //修改一系列操作
        }else{
            //新增一系列操作
            if(type=="note"){
                var event = {};
                //标题
                event.title = $("#noteTitle").val();
                //color
                event.backgroundColor = $("input[name='degree']:checked").val();
                //开始时间
                event.start =  $("#noteStartTime").val();
                //结束时间
                event.end = $("noteEndTime").val();
                //类型
                event.type = type;
                //内容
                event.noteTextCont = $("#noteTextCont").val()
                events.push(event);
                $("#calendar").fullCalendar('refetchEvents');
                $("#operateEventModel [data-dismiss='modal']").click();
            }else{

            }

        }
    }

    //判断非空
    function isNotNull(str){
        if(str!=null && str!="" && str!="undefined"){
            return true;
        }else{
            return false;
        }
    }

    //颜色转换

</script>
<!-- 应用基金 -->


<!-- 选择人员树 -->







</body>
</html>

